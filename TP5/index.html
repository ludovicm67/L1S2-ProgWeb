<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
<title>Plus ou moins</title>
<style>
* {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}
body {
	font-family: sans-serif;
	font-size: 16px;
}
textarea {
	position: fixed;
	top: 0;
	left: 0;
	width: 75%;
	height: 85vh;
	resize: none;
}
input {
	position: fixed;
	top: 85%;
	bottom: 0;
	width: 75%;
	height: 15vh;
}
button {
	position: fixed;
	right: 0;
	width: 25%;
	height: 50vh;
}
#newPartie {
	top: 0;
}
#showSolution {
	bottom: 0;
}
input[type=submit] {
	display: none;
}

</style>
</head>
<body>
<div>
	<textarea readonly="readonly" placeholder="Résultats"></textarea>
	<form>
		<input type="number" placeholder="Entrez un nombre">
		<input type="submit">
	</form>
	<button id="newPartie">Nouvelle partie</button>
	<button id="showSolution">Voir la réponse</button>
</div>
<script>
// Les variables que l'on aura besoin :
//    - number  : contiendra le nombre aléatoire
//    - started : booléen pour savoir si une partie a été lancée ou non
//    - coup    : nombre de tentatives
var number;
var started = false;
var coup;

// Les différents éléments que l'on aura besoin d'accéder régulièrement
var textarea = document.querySelector('textarea');
var input    = document.querySelector('input');


// On se créer une petite fonction pour écrire plus facilement dans le textarea
function writeText(text) {
	textarea.textContent += '\n' + text;
	textarea.scrollTop    = textarea.scrollHeight; // scroll en bas du textarea
}

// On démarre une partie
function start() {
	if(started) end(); // On arrête la partie précédente
	number  = Math.round(Math.random() * 1000); // On génère le nomre aléatoire
	started = true;
	coup    = 0;
	writeText('');
	writeText('════════════════════════════════════════════════');
	writeText('             NOUVELLE PARTIE DEMARREE');
	writeText('┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅');
	input.focus(); // On donne le focus à l'input (c'est + user-friendly ;) )
}

// On termine la partie
function end() {
	started = false;
	if(coup > 0) writeText('┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅┅');
	writeText('                 FIN DE LA PARTIE');
	writeText('════════════════════════════════════════════════');
}

// On affiche la solution
function solution() {
	if(started) {
		writeText('Solution = ' + number);
		end();
	}
}

// On ajoute les évènements pour les clics sur les boutons et le formulaire
document.getElementById('newPartie').addEventListener('click', start);
document.getElementById('showSolution').addEventListener('click', solution);
document.querySelector('form').addEventListener('submit', function (e) {

	e.preventDefault(); // On empêche l'envoi du formulaire

	// Si aucune partie n'a été lancée
	if(!started) writeText('\n    ⚠ Veuillez d\'abord lancer une partie !');

	// Si ce n'est pas un nombre entier
	else if(!Number.isInteger(parseInt(input.value)))
		writeText('\n    ⚠ Veuillez entrer un nombre entier !');

	// Si le nombre entré n'est pas compris entre 0 et 1000
	else if(parseInt(input.value) < 0 || parseInt(input.value) > 1000)
		writeText('\n    ⚠ Veuillez entrez un nombre entre 0 et 1000');

	// Si c'est OK
	else {
		coup++; // On incrémente le nombre de tentatives
		if(input.value < number) writeText('   ' + input.value + ' est trop petit.');
		if(input.value > number) writeText('   ' + input.value + ' est trop grand !');
		if(input.value == number) {
			writeText('\n   ' + input.value + ' est la bonne réponse ! Bravo !');
			writeText('   Nombre de coups : ' + coup);
			end();
		}
	}

	// On vide l'input et on lui redonne le focus
	input.value = '';
	input.focus();

});;
</script>
</body>
</html>